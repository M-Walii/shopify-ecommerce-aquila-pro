{%- comment -%} Basic SEO meta and structured data {%- endcomment -%}
<meta name="description" content="{{ page_description | default: shop.meta_description | escape }}">
<meta property="og:site_name" content="{{ shop.name | escape }}">
<meta property="og:title" content="{{ page_title | escape }}">
<meta property="og:type" content="{% if template.name == 'product' %}product{% elsif template.name == 'article' %}article{% else %}website{% endif %}">
<meta property="og:url" content="{{ canonical_url }}">
{% if template.name == 'product' and product %}
  {% if product.featured_image %}
    <meta property="og:image" content="{{ product.featured_image | image_url: width: 1200 }}">
  {% endif %}
{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": {{ shop.name | json }},
  "url": {{ shop.url | json }},
  "logo": {{ settings.logo | image_url: width: 512 | json }},
  "sameAs": [{% if settings.social_twitter %}{{ settings.social_twitter | json }}{% endif %}{% if settings.social_facebook %}, {{ settings.social_facebook | json }}{% endif %}{% if settings.social_instagram %}, {{ settings.social_instagram | json }}{% endif %}]
}
</script>

{% if template.name == 'product' and product %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": {{ product.title | json }},
  "image": [{% for image in product.images %}{{ image | image_url: width: 1200 | json }}{% unless forloop.last %}, {% endunless %}{% endfor %}],
  "description": {{ product.description | strip_html | truncate: 200 | json }},
  "sku": {{ product.selected_or_first_available_variant.sku | json }},
  "brand": {"@type":"Brand","name": {{ product.vendor | json }}},
  "offers": {
    "@type": "Offer",
    "priceCurrency": {{ shop.currency | json }},
    "price": {{ product.price | money_without_currency | replace:",","." | json }},
    "availability": "https://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
    "url": {{ product.url | json }}
  }
}
</script>
{% endif %}

{% if template.name != 'index' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {"@type":"ListItem","position":1,"name":{{ 'general.breadcrumbs.home' | t | json }},"item":{{ shop.url | json }}}
    {% if template.name == 'collection' and collection %},
      {"@type":"ListItem","position":2,"name":{{ collection.title | json }},"item":{{ collection.url | json }}}
    {% endif %}
    {% if template.name == 'product' and product %},
      {"@type":"ListItem","position":3,"name":{{ product.title | json }},"item":{{ product.url | json }}}
    {% endif %}
  ]
}
</script>
{% endif %}
